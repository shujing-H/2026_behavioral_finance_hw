\documentclass[11pt]{article}

\usepackage[margin=1in]{geometry}
\usepackage{amsmath, amssymb}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{float}
\usepackage{placeins}
\usepackage{indentfirst}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{microtype}

% Indent the first paragraph after section headings.
\setlength{\parindent}{1.5em}

\hypersetup{
  colorlinks=true,
  linkcolor=blue,
  urlcolor=blue,
  citecolor=blue
}

\lstset{
  basicstyle=\ttfamily\small,
  breaklines=true,
  frame=single,
  rulecolor=\color{black!20},
  showstringspaces=false,
  columns=fullflexible
}

\title{Homework 1 Report: Momentum}
\author{Shujing Hou \quad 3040781643 \\ Wenyu Gu \quad 3040782423}
\date{\today}

\begin{document}
\maketitle
\sloppy

\section{Overview and data}

\textbf{Goal.} This report studies the persistence of momentum-based strategies using monthly returns for the top 1,000 U.S. stocks by market capitalization (1980--present) and the Fama--French 3 factors.

\textbf{Signal definition (12--1 momentum).}
At the end of month $t$, the tradable momentum signal for stock $i$ is the cumulative return from $t-12$ to $t-1$:
\[
\text{MOM}_{i,t}^{12\text{--}1} \;=\; \prod_{k=1}^{12} (1+r_{i,t-k}) - 1.
\]
In the implementation, we compute this product in a numerically stable way using log-returns:
\[
\prod_{k=1}^{12} (1+r_{i,t-k}) \;=\; \exp\!\left(\sum_{k=1}^{12}\log(1+r_{i,t-k})\right).
\]

\textbf{Factor scaling note.} The stock returns in \texttt{returns\_indiv.csv} are in decimals, while the Fama--French factor returns in \texttt{monthly\_ff3.csv} are in percentages. For regressions we convert portfolio returns to percentages so that excess returns and factor returns are on the same scale, matching the notebook.

\section{Question 1: Raw returns of 10 momentum-sorted portfolios}
\subsection{Method}
Each month $t$:
\begin{itemize}
  \item Compute $\text{MOM}^{12\text{--}1}_{i,t}$ for every stock.
  \item Sort stocks into 10 deciles based on the \emph{cross-sectional rank} of the signal within month $t$ (decile 1 = lowest momentum, decile 10 = highest momentum).
  \item Form portfolio returns using three weighting schemes (computed separately each month and rebalanced monthly):
  \begin{itemize}
    \item \textbf{Equal-weighted (EW)}: simple mean return within each decile.
    \item \textbf{Value-weighted (VW)}: weights proportional to market capitalization within each decile.
    \item \textbf{Rank-weighted (RW)}: weights proportional to the momentum rank within each decile (higher momentum $\Rightarrow$ larger weight).
  \end{itemize}
  \item Hold the decile portfolios for 1 month using the next-month return (\texttt{ret\_p1}).
\end{itemize}

\subsection{Results}
\begin{table}[H]
\centering
\caption{Average monthly raw returns by momentum decile (in \%).}
\label{tab:q1_raw_returns}
\input{hw1_report_tables/q1_decile_raw_returns.tex}
\end{table}

\begin{figure}[H]
\centering
\begin{subfigure}{0.32\textwidth}
  \includegraphics[width=\linewidth]{hw1_report_assets/q1_cumret_ew.png}
  \caption{EW cumulative returns}
\end{subfigure}
\begin{subfigure}{0.32\textwidth}
  \includegraphics[width=\linewidth]{hw1_report_assets/q1_cumret_vw.png}
  \caption{VW cumulative returns}
\end{subfigure}
\begin{subfigure}{0.32\textwidth}
  \includegraphics[width=\linewidth]{hw1_report_assets/q1_cumret_rw.png}
  \caption{RW cumulative returns}
\end{subfigure}
\caption{Cumulative returns of momentum-sorted decile portfolios (dashed) and the long--short spread (black) under each weighting scheme.}
\label{fig:q1_cumret}
\end{figure}

\begin{figure}[H]
\centering
\includegraphics[width=0.78\textwidth]{hw1_report_assets/q1_longshort_timeseries.png}
\caption{Long--short (decile 10 minus decile 1) portfolio returns over time for EW/VW/RW.}
\label{fig:q1_longshort_series}
\end{figure}
\FloatBarrier

\subsection{Analysis}
The key diagnostic is whether next-month returns are \textbf{increasing in the momentum signal}. Table~\ref{tab:q1_raw_returns} shows a clear monotone pattern across deciles under all three weighting schemes.

\textbf{EW:} Decile 1 earns 0.607\% per month while decile 10 earns 1.388\% per month, a long--short spread of 0.781\% per month (about 9.37\% annualized). \textbf{VW} is extremely similar (0.606\% vs 1.367\%, spread 0.761\% per month), which indicates the premium is not driven only by smaller names within the ``top 1000'' universe. \textbf{RW} also produces a large spread (0.750\% vs 1.376\%, spread 0.626\% per month), but its loser-decile average is higher, which mechanically compresses the long--short.

Figure~\ref{fig:q1_longshort_series} shows that EW/VW/RW long--short series co-move strongly over time, suggesting the choice of weighting changes the magnitude of the premium more than its timing.


% --------------------------Question 2----------------------------------
\newpage
\section{Question 2: CAPM $\alpha$ and $\beta$ for the 10 portfolios}
\subsection{Method}
For each decile portfolio $p$, we run the CAPM regression on \textbf{excess returns}:
\[
(R_{p,t}-R_{f,t}) = \alpha_p + \beta_p (R_{m,t}-R_{f,t}) + \varepsilon_{p,t}.
\]
Standard errors are the OLS standard errors (as in the notebook).

\subsection{Results}
\begin{table}[H]
\centering
\caption{CAPM results by decile (EW portfolios). Returns and factors are in percent per month.}
\label{tab:q2_capm_ew}
\input{hw1_report_tables/q2_capm_ew.tex}
\end{table}

\begin{table}[H]
\centering
\caption{CAPM results by decile (VW portfolios). Returns and factors are in percent per month.}
\label{tab:q2_capm_vw}
\small
{\input{hw1_report_tables/q2_capm_vw.tex}}
\end{table}

\begin{table}[H]
\centering
\caption{CAPM results by decile (RW portfolios). Returns and factors are in percent per month.}
\label{tab:q2_capm_rw}
\input{hw1_report_tables/q2_capm_rw.tex}
\end{table}
\FloatBarrier

\subsection{Analysis}
\textbf{What the CAPM results show (Tables~\ref{tab:q2_capm_ew}--\ref{tab:q2_capm_rw}).}

\textbf{1) Large and robust alpha spread.} Under EW, CAPM $\alpha$ rises from 0.295\% (decile 1) to 1.111\% (decile 10), a spread of about 0.816\% per month. VW and RW show nearly the same winner-minus-loser alpha spread (VW: 0.296\% to 1.092\%; RW: 0.448\% to 1.099\%). This indicates that the momentum pattern is not explained by market exposure alone.

\textbf{2) Betas are low and fairly flat across deciles.} In all three tables, CAPM betas range roughly from 0.06 to 0.13 and do not increase systematically with momentum. Therefore the return differences across deciles are coming primarily from $\alpha$ rather than higher market risk.

\textbf{3) Statistical strength is concentrated in mid/high deciles.} For EW/VW/RW, most mid-to-high deciles have $t$-statistics on $\alpha$ around 2.4--3.5, while decile 1 is not significant (EW $t=0.71$, VW $t=0.72$). This suggests that in this sample, the momentum premium is driven more by winner outperformance than by loser underperformance.



% --------------------------Question 3----------------------------------
\newpage
\section{Question 3: Long--short momentum portfolio (decile 10 minus decile 1)}
\subsection{Method}
Construct a long--short strategy that is long the top momentum decile and short the bottom momentum decile, held for 1 month and rebalanced monthly. For each weighting scheme we compute:
\begin{itemize}
  \item Average raw return (annualized).
  \item CAPM $\alpha$ and its $t$-statistic.
  \item FF3 $\alpha$ and its $t$-statistic.
  \item Annual Sharpe ratio, using monthly excess returns and scaling by $\sqrt{12}$.
\end{itemize}

\subsection{Results}
\begin{table}[H]
\centering
\caption{Long--short (10--1) strategy summary statistics (EW/VW/RW).}
\label{tab:q3_ls}
\small
\resizebox{\textwidth}{!}{\input{hw1_report_tables/q3_longshort_summary.tex}}
\end{table}
\FloatBarrier

\subsection{Analysis}
Table~\ref{tab:q3_ls} summarizes the winner-minus-loser (10--1) strategy.

\textbf{Average return (annualized).} EW and VW are both around 9.1--9.4\% annualized (EW: 9.3647\%, VW: 9.1353\%), while RW is smaller (7.5043\%).

\textbf{Risk-adjusted performance.} The alphas are positive across all weighting schemes (e.g., EW CAPM $\alpha=0.5963\%$ per month; EW FF3 $\alpha=0.6154\%$ per month), but the $t$-statistics are only 1.1--1.5, i.e., below the 5\% significance threshold ($|t| \ge 1.96$). In this run, the premium is economically meaningful but statistically noisy.

\textbf{Sharpe ratios.} Annual Sharpe ratios are positive but modest (EW: 0.2510; VW: 0.2448; RW: 0.1909), reflecting the high volatility of momentum spreads.

\textbf{Weighting comparison.} The fact that EW $\approx$ VW suggests the spread is not driven only by smaller firms (within this universe). RW underperforms here, which is consistent with the signal working mainly at the decile membership level rather than increasing smoothly with within-decile signal strength.


% --------------------------Question 4----------------------------------
\newpage
\section{Question 4: $\tau$-month horizon momentum strategy}
\subsection{Economic prediction}

\textbf{Underreaction story.} If momentum is driven by investors \emph{under-reacting} to news, then the momentum effect should \textbf{persist for some horizons}: FF $\alpha(\tau)$ should remain positive for small-to-medium $\tau$ and only decay gradually as prices incorporate information.

\textbf{Overreaction story.} If momentum is driven by \emph{over-reaction}, then one expects \textbf{reversal at longer horizons}: FF $\alpha(\tau)$ may become smaller and eventually negative as mispricing corrects.

\subsection{Empirical results}
\begin{table}[H]
\centering
\caption{Representative horizons: FF3 $\alpha$ and $t$-stat for the $\tau$-month horizon long--short strategy.}
\label{tab:q4_small}
\input{hw1_report_tables/q4_horizon_small.tex}
\end{table}

\begin{figure}[H]
\centering
\includegraphics[width=0.92\textwidth]{hw1_report_assets/q4_horizon_alpha_tstat.png}
\caption{FF3 $\alpha$ and $t$-statistics for the $\tau$-month horizon momentum strategy as a function of $\tau$ (EW/VW/RW).}
\label{fig:q4_horizon}
\end{figure}
\FloatBarrier

\subsection{Conclusion}
Table~\ref{tab:q4_small} and Figure~\ref{fig:q4_horizon} show a clear \textbf{short-term momentum / long-term reversal} pattern across all three weighting schemes.

\textbf{Short horizons: positive but not strongly significant.} At $\tau=1$, FF3 $\alpha$ is positive for EW/VW/RW (0.6154\%, 0.5946\%, 0.4517\%) with $t$-statistics around 1.16--1.50. By $\tau=3$ and $\tau=6$, the alphas decay toward zero.

\textbf{Long horizons: reversal, strongest around 24 months.} By $\tau=12$, alphas turn negative for EW/VW/RW (about $-0.31$ to $-0.35$\%). The reversal is strongest and statistically significant at $\tau=24$ months: EW $\alpha=-0.5994\%$ with $t=-2.2358$, VW $\alpha=-0.5138\%$ with $t=-2.2861$, and RW $\alpha=-0.4823\%$ with $t=-2.1609$. \footnote{We are referring to the Table \ref{tab:q4_small}'s results. From Figure \ref{fig:q4_horizon} the strongest reversal is around $\tau=20$ and alpha turns negative around $\tau=8$. The reason why we only show part of the results in Table \ref{tab:q4_small} is that these horizons are commonly used for calculating the momentum factor.}

\textbf{Interpretation.} Positive short-horizon alphas are consistent with underreaction (slow price adjustment), while the significant negative long-horizon alphas support overreaction and subsequent correction (reversal). This is why momentum strategies are typically implemented with short holding horizons and frequent rebalancing.


% --------------------------Appendix----------------------------------
\appendix
\section{Appendix A: Code}
The full code used to produce these results is included in the repository as a generated Python script extracted from the notebook. See:
\begin{center}
\texttt{hw1/code/hw1\_appendix.py}
\end{center}

\lstinputlisting{../code/hw1_appendix.py}

\end{document}

